<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">
		<link rel="stylesheet" href="css/custom.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>
						Railsã¨Stimulusã§<br>ç°¡å˜ãƒ•ãƒ­ãƒ³ãƒˆé–‹ç™º
					</h1>
					<p>
						Kosuke Adachi<br>
						@fuyu77<br>
						2018.11.22 Meguro.rb#21
					</p>
				</section>
				<section>
					<div class="left">
						<h4>è‡ªå·±ç´¹ä»‹</h4>
						<ul>
							<li>å‰è·ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã—ãªã„SE<br>â†’é€€è·ã—ã¦Railsã‚’å‹‰å¼·<br>â†’2018å¹´7æœˆã«CaSyå…¥ç¤¾</li>
							<li>å¤§å­¦ã®å°‚æ”»ã¯å›½æ–‡å­¦ï¼ˆçŸ­æ­Œï¼‰</li>
							<li>ç„¡è·æœŸé–“ã«Railsã§<a href="https://utakatanka.jp">çŸ­æ­ŒæŠ•ç¨¿ã‚µã‚¤ãƒˆUtakata</a>ã‚’ãƒªãƒªãƒ¼ã‚¹</li>
						</ul>
					</div>
					<div class="right">
						<img src="img/utakata.jpg" width="75%">
					</div>
				</section>
				<section>
          <h3>ã‚„ã‚ŠãŸã„ã“ã¨</h3>
          <p>å€‹äººé–‹ç™ºã®æ—¢å­˜ã®Railsãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«<br>JSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å…¥ã‚ŒãŸã„</p>
				</section>
				<section>
					<h3>Reactã‚„Vue.jsã¯è¨­è¨ˆãŒé›£ã—ã„â€¦</h3>
					<ul>
						<li>çŠ¶æ…‹ç®¡ç†ã¯ï¼Ÿ</li>
						<li>ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯ï¼Ÿ</li>
						<li>SPAã«ã™ã‚‹ã‹ã€Turbolinksã‚’æ´»ç”¨ã™ã‚‹ã‹ï¼Ÿ</li>
						<li>æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ã®æ•´åˆæ€§ã¯ï¼Ÿ</li>
					</ul>
				</section>
				<section>
						<h3>è©¦è¡ŒéŒ¯èª¤ã®çµæœâ€¦</h3>
					<div class="left">
						<img src="img/utakata.jpg" width="60%"><br>
						Vue.jså°å…¥å‰
					</div>
				  <div class="right">
						<img src="img/hello.jpg" width="60%"><br>
						Vue.jså°å…¥å¾Œ
					</div>
				</section>
				<section>
					<h1>ã¤ã‚‰ã„</h1>
				</section>
				<section>
					<h1>Stimulusã®ç™ºè¦‹</h1>
				</section>
				<section>
					<h3>Stimulusã¨ã¯</h3>
					<ul>
						<li>DHHãŒCTOã‚’å‹™ã‚ã‚‹BasecampãŒé–‹ç™º</li>
						<li>Turbolinksã«å¯¾å¿œ<br>ï¼ˆTurbolinksä½œè€…ã®sstephensonãŒé–‹ç™ºã‚’ä¸»å°ï¼‰</li>
						<li>ãƒ¢ãƒ€ãƒ³JSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®å¤šããŒã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å–å¾—ã—ãŸJSONã‚’å…ƒã«HTMLã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã‚’ä¸»çœ¼ã¨ã™ã‚‹ã®ã«å¯¾ã—ã€Stimulusã¯ã‚µãƒ¼ãƒãƒ¼ãŒç”¨æ„ã—ãŸHTMLã‚’æ“ä½œã™ã‚‹ã“ã¨ã‚’ä¸»çœ¼ã¨ã™ã‚‹</li>
					</ul>
				</section>
				<section>
					<h3>æ—¢å­˜ã®Railsã‚¢ãƒ—ãƒªã¸ã®Stimulusã®å°å…¥</h3>
					<ol>
						<li>yarnã¨webpackerã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
						<li><code>$ rails webpacker:install:stimulus</code></li>
						<li><code><%= javascript_pack_tag 'application' %></code>ã‚’HTMLã®headã‚¿ã‚°å†…ã«è¿½åŠ </li>
					</ol>
				</section>
				<section>
					<h3>Stimulusã®åŸºæœ¬ä¸‰è¦ç´ </h3>
					<ul>
						<li>data-controllerï¼šcontrolleråã‚’æŒ‡å®šã™ã‚‹</li>
						<li>data-targetï¼šæ“ä½œã—ãŸã„è¦ç´ ã‚’æŒ‡åã™ã‚‹<br><code>controller.target</code></li>
						<li>data-actionï¼šã‚¤ãƒ™ãƒ³ãƒˆã¨èµ·å‹•ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰åã‚’æŒ‡å®šã™ã‚‹<br><code>event->contoroller#method</code></li>
					</ul>
				</section>
				<section>
					<h3>Hello, World!</h3>
					<pre>html<code data-trim>
						<div data-controller="hello">
							<input data-target="hello.name" type="text">
							<button data-action="click->hello#greet">Greet</button>
							<div data-target="hello.output"></div>
						</div>
					</code></pre>
					<pre>hello_controller.js<code data-trim>
						import { Controller } from "stimulus"

						export default class extends Controller {
							static targets = [ "name", "output" ]

							greet() {
								this.outputTarget.textContent = `Hello, ${this.nameTarget.value}!`
							}
						}
					</code></pre>
				</section>
				<section>
					<h3>Lifecycle Callbacks</h3>
					<ul>
						<li>initialize()ï¼šæœ€åˆã«1å›ã ã‘å‘¼ã³å‡ºã•ã‚Œã‚‹</li>
						<li>connect()ï¼šcontrollerã¨DOMãŒæ¥ç¶šã™ã‚‹åº¦ã«å‘¼ã³å‡ºã•ã‚Œã‚‹</li>
						<li>disconnect()ï¼šcontrollerã¨DOMãŒåˆ‡æ–­ã•ã‚Œã‚‹åº¦ã«å‘¼ã³å‡ºã•ã‚Œã‚‹</li>
					</ul>
				</section>
				<section>
					<h3>å®Ÿè¡Œé †åº</h3>
					<pre>html<code data-trim>
						<div id="hello" data-controller="hello"></div>
					</code></pre>
					<pre>hello_controller.js<code data-trim>
						import { Controller } from "stimulus"

						export default class extends Controller {
						
							initialize() {
								console.log("initialize")
								// initialize
								// connect
								const element = document.getElementById("post")
								element.remove()
								// disconnect
								document.body.appendChild(element)
								//connect
							}
						
							connect() {
								console.log("connect")
							}
							
							disconnect() {
								console.log("disconnect")
							}
						}	
					</code></pre>
				</section>
        <section>
					<h3>Data APIã§çŠ¶æ…‹ç®¡ç†</h3>
					<pre>html<code data-trim>
						<div data-controller="hello" data-hello-index="value"></div>
					</code></pre>
					<ul>
						<li>this.data.has("index")ï¼šcontrollerã®è¦ç´ ãŒ<code>data-hello-index</code>ã‚’æŒã£ã¦ã„ãŸã‚‰true, æŒã£ã¦ã„ãªã‹ã£ãŸã‚‰false</li>
						<li>this.data.get("index")ï¼š<code>data-hello-index</code>ã®å€¤ã‚’Stringå‹ã§è¿”ã™</li>
						<li>this.data.set("index", index)ï¼š<code>data-hello-index</code>ã«å€¤ã‚’ã‚»ãƒƒãƒˆã™ã‚‹</li>
					</ul>
				</section>
				<section>
					<h3>ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼</h3>
					<pre>html<code data-trim>
						<div data-controller="slideshow" data-slideshow-index="0">
							<button data-action="slideshow#previous">â†</button>
							<button data-action="slideshow#next">â†’</button>
						
							<div data-target="slideshow.slide" class="slide">ğŸµ</div>
							<div data-target="slideshow.slide" class="slide">ğŸ™ˆ</div>
							<div data-target="slideshow.slide" class="slide">ğŸ™‰</div>
							<div data-target="slideshow.slide" class="slide">ğŸ™Š</div>
						</div>
					</code></pre>
					<pre>css<code data-trim>
						.slide {
							display: none;
						}
						
						.slide.slide--current {
							display: block;
						}
					</code></pre>
				</section>
				<section>
					<pre>slideshow_controller.js<code data-trim>
						import { Controller } from "stimulus"

						export default class extends Controller {
							static targets = [ "slide" ]
						
							initialize() {
								this.showCurrentSlide()
							}
						
							next() {
								this.index++
							}
						
							previous() {
								this.index--
							}
						
							showCurrentSlide() {
								this.slideTargets.forEach((el, i) => {
									el.classList.toggle("slide--current", this.index == i)
								})
							}
						
							get index() {
								return parseInt(this.data.get("index"))
							}
						
							set index(value) {
								this.data.set("index", value)
								this.showCurrentSlide()
							}
						}
					</code></pre>
				</section>
				<section>
					<h3>ã¾ã¨ã‚</h3>
					<ul>
						<li>å€‹äººé–‹ç™ºã®å°è¦æ¨¡Railsãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¨ã®ç›¸æ€§ã¯ãƒãƒƒãƒãƒªï¼</li>
						<li>Controllerå˜ä½ã§JSã‚’æ•´ç†ã§ãã‚‹ã®ã§è¦‹é€šã—ãŒè‰¯ã•ãã†</li>
						<li>ãƒ“ã‚¸ãƒã‚¹ã§ä½¿ã†ã«ã¯ä½æ©Ÿèƒ½éãã‚‹ã‹â€¦ï¼Ÿ</li>
					</ul>
				</section>
				<section>
					<h3>ç–‘å•ç‚¹</h3>
					<ul>
						<li><code>connect()</code>ã¨<code>disconnect()</code>ãŒå…·ä½“çš„ã«ã©ã†å½¹ç«‹ã¤ã®ã‹ã¤ã‹ã‚ãªã‹ã£ãŸ</li>
					</ul>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
